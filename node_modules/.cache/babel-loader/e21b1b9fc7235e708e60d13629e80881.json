{"remainingRequest":"/home/alijon/pet-projects/test-on-vue-3/node_modules/babel-loader/lib/index.js!/home/alijon/pet-projects/test-on-vue-3/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/alijon/pet-projects/test-on-vue-3/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/alijon/pet-projects/test-on-vue-3/src/views/User.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/alijon/pet-projects/test-on-vue-3/src/views/User.vue","mtime":1677463436864},{"path":"/home/alijon/pet-projects/test-on-vue-3/node_modules/cache-loader/dist/cjs.js","mtime":1677358791790},{"path":"/home/alijon/pet-projects/test-on-vue-3/node_modules/babel-loader/lib/index.js","mtime":1677358791782},{"path":"/home/alijon/pet-projects/test-on-vue-3/node_modules/cache-loader/dist/cjs.js","mtime":1677358791790},{"path":"/home/alijon/pet-projects/test-on-vue-3/node_modules/vue-loader-v16/dist/index.js","mtime":1677358836761}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvYWxpam9uL3BldC1wcm9qZWN0cy90ZXN0LW9uLXZ1ZS0zL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvYWxpam9uL3BldC1wcm9qZWN0cy90ZXN0LW9uLXZ1ZS0zL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IHsgcmVmLCByZWFjdGl2ZSwgdG9SZWZzLCBvbk1vdW50ZWQsIGNvbXB1dGVkIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgdXNlUm91dGUgfSBmcm9tICJ2dWUtcm91dGVyIjsgLy8gaW1wb3J0IHttYXBHZXR0ZXJzLCBtYXBNdXRhdGlvbnN9IGZyb20gInZ1ZXgiOwoKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IEFwcFNlY3Rpb24gZnJvbSAiLi4vY29tcG9uZW50cy9BcHBTZWN0aW9uLnZ1ZSI7CmltcG9ydCBBcHBGaWVsZCBmcm9tICIuLi9jb21wb25lbnRzL0FwcEZpZWxkLnZ1ZSI7CmltcG9ydCBBcHBDaGVja2JveCBmcm9tICIuLi9jb21wb25lbnRzL0FwcENoZWNrYm94LnZ1ZSI7Ci8qKg0KICogQG5hbWUgRWRpdEZvcm0NCiAqIEBkZXNjcmlwdGlvbiBGb3JtIGVkaXRpb24gdXNlcg0KICovCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlVzZXIiLAogIGNvbXBvbmVudHM6IHsKICAgIEFwcFNlY3Rpb246IEFwcFNlY3Rpb24sCiAgICBBcHBGaWVsZDogQXBwRmllbGQsCiAgICBBcHBDaGVja2JveDogQXBwQ2hlY2tib3gKICB9LAogIC8vIGNvbXB1dGVkOiB7CiAgLy8gICAuLi5tYXBHZXR0ZXJzKHsgVG9rZW46ICdsb2dpbi9Ub2tlbicgfSkKICAvLyB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICB2YXIgcm91dGUgPSB1c2VSb3V0ZSgpOwogICAgdmFyIGZvcm0gPSByZWYoewogICAgICBpZDogJycsCiAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAnZmlyc3RfbmFtZSc6ICcnLAogICAgICAnbGFzdF9uYW1lJzogJycsCiAgICAgICdpc19hY3RpdmUnOiBmYWxzZQogICAgfSk7CiAgICB2YXIgaWQgPSByZWYocm91dGUucGFyYW1zWydpZCddKTsKICAgIHZhciB0b2tlbiA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLmdldHRlcnNbImxvZ2luL1Rva2VuIl07CiAgICB9KTsKICAgIGNvbnNvbGUubG9nKCd0b2tlbjogJywgdG9rZW4udmFsdWUpOwogICAgY29uc29sZS5sb2coJ3Rva2VuOiAnLCBpZCk7CgogICAgdmFyIGNoYW5nZUxvYWRpbmcgPSBmdW5jdGlvbiBjaGFuZ2VMb2FkaW5nKGZsYWcpIHsKICAgICAgc3RvcmUuY29tbWl0KCdtb2RhbC9DSEFOR0VfTE9BRElORycsIGZsYWcpOwogICAgfTsKCiAgICB2YXIgZWRpdFVzZXIgPSBmdW5jdGlvbiBlZGl0VXNlcigpIHsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ3VzZXIvZWRpdFVzZXInLCBfb2JqZWN0U3ByZWFkKHt9LCBmb3JtLnZhbHVlKSk7CiAgICB9OwoKICAgIG9uTW91bnRlZCggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIF95aWVsZCRheGlvcyRnZXQsIGRhdGE7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY2hhbmdlTG9hZGluZyh0cnVlKTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCJodHRwczovL3Rlc3QtYXNzaWdubWVudC5lbXBoYXNvZnQuY29tL2FwaS92MS91c2Vycy8iLmNvbmNhdChpZC52YWx1ZSksIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIlRva2VuICIuY29uY2F0KHRva2VuLnZhbHVlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF95aWVsZCRheGlvcyRnZXQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkYXhpb3MkZ2V0LmRhdGE7CiAgICAgICAgICAgICAgZm9ybS52YWx1ZSA9IGRhdGE7CiAgICAgICAgICAgICAgY2hhbmdlTG9hZGluZyhmYWxzZSk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKTsKCiAgICBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICBjaGFuZ2VMb2FkaW5nKHRydWUpOwogICAgICBlZGl0VXNlcigpOwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIGZvcm06IGZvcm0sCiAgICAgIC8vIHtpZCwgdXNlcm5hbWUsIHBhc3N3b3JkLCBmaXJzdF9uYW1lLCBsYXN0X25hbWUsIGlzX2FjdGl2ZX0gPSBmb3JtCiAgICAgIHN1Ym1pdEZvcm06IHN1Ym1pdEZvcm0KICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["/home/alijon/pet-projects/test-on-vue-3/src/views/User.vue"],"names":[],"mappings":";;;AA0DA,SAAS,GAAT,EAAc,QAAd,EAAwB,MAAxB,EAAgC,SAAhC,EAA2C,QAA3C,QAA2D,KAA3D;AACA,SAAQ,QAAR,QAAuB,MAAvB;AACA,SAAQ,QAAR,QAAuB,YAAvB,C,CACA;;AACA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,UAAP,MAAuB,8BAAvB;AACA,OAAO,QAAP,MAAqB,4BAArB;AACA,OAAO,WAAP,MAAwB,+BAAxB;AACA;AACC;AACA;AACA;;AACD,eAAe;AACb,EAAA,IAAI,EAAE,MADO;AAEb,EAAA,UAAU,EAAE;AAAC,IAAA,UAAU,EAAV,UAAD;AAAa,IAAA,QAAQ,EAAR,QAAb;AAAuB,IAAA,WAAW,EAAX;AAAvB,GAFC;AAGb;AACA;AACA;AACA,EAAA,KANa,mBAML;AACN,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,IAAG,GAAI,GAAG,CAAC;AACf,MAAA,EAAE,EAAE,EADW;AAEf,MAAA,QAAQ,EAAE,EAFK;AAGf,MAAA,QAAQ,EAAE,EAHK;AAIf,oBAAc,EAJC;AAKf,mBAAa,EALE;AAMf,mBAAa;AANE,KAAD,CAAhB;AAQA,QAAM,EAAC,GAAI,GAAG,CAAC,KAAK,CAAC,MAAN,CAAa,IAAb,CAAD,CAAd;AACA,QAAM,KAAI,GAAI,QAAQ,CAAC;AAAA,aAAM,KAAK,CAAC,OAAN,CAAc,aAAd,CAAN;AAAA,KAAD,CAAtB;AACA,IAAA,OAAO,CAAC,GAAR,CAAY,SAAZ,EAAuB,KAAK,CAAC,KAA7B;AACA,IAAA,OAAO,CAAC,GAAR,CAAY,SAAZ,EAAuB,EAAvB;;AAEA,QAAM,aAAY,GAAI,SAAhB,aAAgB,CAAC,IAAD,EAAU;AAC9B,MAAA,KAAK,CAAC,MAAN,CAAa,sBAAb,EAAqC,IAArC;AACF,KAFA;;AAIA,QAAM,QAAO,GAAI,SAAX,QAAW,GAAM;AACrB,MAAA,KAAK,CAAC,QAAN,CAAe,eAAf,oBAAoC,IAAI,CAAC,KAAzC;AACF,KAFA;;AAIA,IAAA,SAAS,uEAAC;AAAA;;AAAA;AAAA;AAAA;AAAA;AACR,cAAA,aAAa,CAAC,IAAD,CAAb;AADQ;AAAA,qBAGe,KAAK,CAAC,GAAN,8DAAgE,EAAE,CAAC,KAAnE,GAA4E;AACjG,gBAAA,OAAO,EAAE;AACP,kBAAA,aAAa,kBAAW,KAAK,CAAC,KAAjB;AADN;AADwF,eAA5E,CAHf;;AAAA;AAAA;AAGA,cAAA,IAHA,oBAGA,IAHA;AASR,cAAA,IAAI,CAAC,KAAL,GAAa,IAAb;AACA,cAAA,aAAa,CAAC,KAAD,CAAb;;AAVQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD,GAAT;;AAaA,aAAS,UAAT,GAAsB;AACpB,MAAA,aAAa,CAAC,IAAD,CAAb;AACA,MAAA,QAAQ;AACV;;AAEA,WAAO;AACL,MAAA,IAAI,EAAJ,IADK;AACE;AACP,MAAA,UAAS,EAAT;AAFK,KAAP;AAID;AApDY,CAAf","sourcesContent":["<template>\r\n  <AppSection tag=\"section\">\r\n    <template #head>\r\n      <h1>Редактировать пользователя</h1>\r\n    </template>\r\n    <form class=\"user-form\" @submit.prevent=\"submitForm\">\r\n      <div class=\"user-form__fields\">\r\n        <AppField\r\n            v-model=\"form.username\"\r\n            :model-value=\"form.username\"\r\n            id=\"user-name\"\r\n            placeholder=\"Введите ваше имя\"\r\n            maxLength=\"150\"\r\n        >\r\n          Ник\r\n        </AppField>\r\n        <AppField\r\n            v-model=\"form.password\"\r\n            type=\"password\"\r\n            id=\"user-password\"\r\n            placeholder=\"Введите ваш пароль\"\r\n            maxLength=\"128\"\r\n        >\r\n          Пароль\r\n        </AppField>\r\n        <AppField\r\n            v-model=\"form.last_name\"\r\n            :model-value=\"form.last_name\"\r\n            id=\"last-name\"\r\n            placeholder=\"Введите ваше фамилия\"\r\n            maxLength=\"150\"\r\n        >\r\n          Фамилия\r\n        </AppField>\r\n        <AppField\r\n            v-model=\"form.first_name\"\r\n            :model-value=\"form.first_name\"\r\n            id=\"first-name\"\r\n            placeholder=\"Введите ваше имя\"\r\n            maxLength=\"150\"\r\n        >\r\n          Имя\r\n        </AppField>\r\n      </div>\r\n      <AppCheckbox v-model=\"form.is_active\">активный</AppCheckbox>\r\n      <div class=\"user-form__controls\">\r\n        <button type=\"submit\" class=\"btn _accent\">Редактировать</button>\r\n        <router-link to=\"/users\" type=\"button\" class=\"btn _danger\">Назад</router-link>\r\n      </div>\r\n\r\n      <div>\r\n        {{form}}\r\n      </div>\r\n    </form>\r\n  </AppSection>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, toRefs, onMounted, computed } from \"vue\";\r\nimport {useStore} from \"vuex\";\r\nimport {useRoute} from \"vue-router\";\r\n// import {mapGetters, mapMutations} from \"vuex\";\r\nimport axios from \"axios\";\r\nimport AppSection from \"../components/AppSection.vue\";\r\nimport AppField from \"../components/AppField.vue\";\r\nimport AppCheckbox from \"../components/AppCheckbox.vue\";\r\n/**\r\n * @name EditForm\r\n * @description Form edition user\r\n */\r\nexport default {\r\n  name: \"User\",\r\n  components: {AppSection, AppField, AppCheckbox},\r\n  // computed: {\r\n  //   ...mapGetters({ Token: 'login/Token' })\r\n  // },\r\n  setup() {\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    const form = ref({\r\n      id: '',\r\n      username: '',\r\n      password: '',\r\n      'first_name': '',\r\n      'last_name': '',\r\n      'is_active': false\r\n    })\r\n    const id = ref(route.params['id'])\r\n    const token = computed(() => store.getters[\"login/Token\"])\r\n    console.log('token: ', token.value)\r\n    console.log('token: ', id)\r\n\r\n    const changeLoading = (flag) => {\r\n      store.commit('modal/CHANGE_LOADING', flag)\r\n    }\r\n\r\n    const editUser = () => {\r\n      store.dispatch('user/editUser', {...form.value})\r\n    }\r\n\r\n    onMounted(async () => {\r\n      changeLoading(true)\r\n\r\n      const { data } = await axios.get(`https://test-assignment.emphasoft.com/api/v1/users/${id.value}`, {\r\n        headers: {\r\n          Authorization: `Token ${token.value}`\r\n        }\r\n      })\r\n\r\n      form.value = data\r\n      changeLoading(false)\r\n    })\r\n\r\n    function submitForm() {\r\n      changeLoading(true)\r\n      editUser()\r\n    }\r\n\r\n    return {\r\n      form,  // {id, username, password, first_name, last_name, is_active} = form\r\n      submitForm\r\n    }\r\n  },\r\n}\r\n</script>"],"sourceRoot":""}]}