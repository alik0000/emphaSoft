{"remainingRequest":"/home/alijon/pet-projects/emphaSoft/node_modules/babel-loader/lib/index.js!/home/alijon/pet-projects/emphaSoft/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/alijon/pet-projects/emphaSoft/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/alijon/pet-projects/emphaSoft/src/views/User.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/alijon/pet-projects/emphaSoft/src/views/User.vue","mtime":1689054804317},{"path":"/home/alijon/pet-projects/emphaSoft/node_modules/cache-loader/dist/cjs.js","mtime":1687656704219},{"path":"/home/alijon/pet-projects/emphaSoft/node_modules/babel-loader/lib/index.js","mtime":1687656704059},{"path":"/home/alijon/pet-projects/emphaSoft/node_modules/cache-loader/dist/cjs.js","mtime":1687656704219},{"path":"/home/alijon/pet-projects/emphaSoft/node_modules/vue-loader-v16/dist/index.js","mtime":1687656705759}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvYWxpam9uL3BldC1wcm9qZWN0cy9lbXBoYVNvZnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9hbGlqb24vcGV0LXByb2plY3RzL2VtcGhhU29mdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IHJlZiwgb25Nb3VudGVkLCB0b1JlZnMsIHJlYWN0aXZlIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgdXNlUm91dGUgfSBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IEFwcFNlY3Rpb24gZnJvbSAiLi4vY29tcG9uZW50cy9BcHBTZWN0aW9uLnZ1ZSI7CmltcG9ydCBBcHBGaWVsZCBmcm9tICIuLi9jb21wb25lbnRzL0FwcEZpZWxkLnZ1ZSI7CmltcG9ydCBBcHBDaGVja2JveCBmcm9tICIuLi9jb21wb25lbnRzL0FwcENoZWNrYm94LnZ1ZSI7Ci8qKg0KICogQG5hbWUgRWRpdEZvcm0NCiAqIEBkZXNjcmlwdGlvbiBGb3JtIGVkaXRpb24gdXNlcg0KICovCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlVzZXIiLAogIGNvbXBvbmVudHM6IHsKICAgIEFwcFNlY3Rpb246IEFwcFNlY3Rpb24sCiAgICBBcHBGaWVsZDogQXBwRmllbGQsCiAgICBBcHBDaGVja2JveDogQXBwQ2hlY2tib3gKICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICB2YXIgcm91dGUgPSB1c2VSb3V0ZSgpOwogICAgdmFyIGlkID0gcmVmKHJvdXRlLnBhcmFtc1snaWQnXSk7CiAgICB2YXIgZm9ybSA9IHJlYWN0aXZlKHsKICAgICAgaWQ6IGlkLAogICAgICB1c2VybmFtZTogJycsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgJ2ZpcnN0X25hbWUnOiAnJywKICAgICAgJ2xhc3RfbmFtZSc6ICcnLAogICAgICAnaXNfYWN0aXZlJzogZmFsc2UKICAgIH0pOwoKICAgIHZhciBjaGFuZ2VMb2FkaW5nID0gZnVuY3Rpb24gY2hhbmdlTG9hZGluZyhmbGFnKSB7CiAgICAgIHN0b3JlLmNvbW1pdCgnbW9kYWwvQ0hBTkdFX0xPQURJTkcnLCBmbGFnKTsKICAgIH07CgogICAgb25Nb3VudGVkKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgX3lpZWxkJGF4aW9zJGdldCwgZGF0YTsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjaGFuZ2VMb2FkaW5nKHRydWUpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoIi9hcGkvdjEvdXNlcnMvIi5jb25jYXQoaWQudmFsdWUpKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBfeWllbGQkYXhpb3MkZ2V0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJGF4aW9zJGdldC5kYXRhOwogICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oZm9ybSwgX29iamVjdFNwcmVhZCh7fSwgZGF0YSkpOwogICAgICAgICAgICAgIGNoYW5nZUxvYWRpbmcoZmFsc2UpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSk7CgogICAgZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHsKICAgICAgY2hhbmdlTG9hZGluZyh0cnVlKTsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ3VzZXIvZWRpdFVzZXInLCBfb2JqZWN0U3ByZWFkKHt9LCBmb3JtLnZhbHVlKSk7CiAgICB9CgogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdG9SZWZzKGZvcm0pKSwge30sIHsKICAgICAgc3VibWl0Rm9ybTogc3VibWl0Rm9ybQogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["/home/alijon/pet-projects/emphaSoft/src/views/User.vue"],"names":[],"mappings":";;;AAuDA,SAAQ,GAAR,EAAa,SAAb,EAAwB,MAAxB,EAAgC,QAAhC,QAA+C,KAA/C;AACA,SAAQ,QAAR,QAAuB,MAAvB;AACA,SAAQ,QAAR,QAAuB,YAAvB;AACA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,UAAP,MAAuB,8BAAvB;AACA,OAAO,QAAP,MAAqB,4BAArB;AACA,OAAO,WAAP,MAAwB,+BAAxB;AACA;AACC;AACA;AACA;;AACD,eAAe;AACb,EAAA,IAAI,EAAE,MADO;AAEb,EAAA,UAAU,EAAE;AAAC,IAAA,UAAU,EAAV,UAAD;AAAa,IAAA,QAAQ,EAAR,QAAb;AAAuB,IAAA,WAAW,EAAX;AAAvB,GAFC;AAIb,EAAA,KAJa,mBAIL;AACN,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,EAAC,GAAI,GAAG,CAAC,KAAK,CAAC,MAAN,CAAa,IAAb,CAAD,CAAd;AACA,QAAI,IAAG,GAAI,QAAQ,CAAC;AAClB,MAAA,EAAE,EAAF,EADkB;AAElB,MAAA,QAAQ,EAAE,EAFQ;AAGlB,MAAA,QAAQ,EAAE,EAHQ;AAIlB,oBAAc,EAJI;AAKlB,mBAAa,EALK;AAMlB,mBAAa;AANK,KAAD,CAAnB;;AASA,QAAM,aAAY,GAAI,SAAhB,aAAgB,CAAC,IAAD,EAAU;AAC9B,MAAA,KAAK,CAAC,MAAN,CAAa,sBAAb,EAAqC,IAArC;AACF,KAFA;;AAIA,IAAA,SAAS,uEAAC;AAAA;;AAAA;AAAA;AAAA;AAAA;AACR,cAAA,aAAa,CAAC,IAAD,CAAb;AADQ;AAAA,qBAGe,KAAK,CAAC,GAAN,yBAA2B,EAAE,CAAC,KAA9B,EAHf;;AAAA;AAAA;AAGA,cAAA,IAHA,oBAGA,IAHA;AAKR,cAAA,MAAM,CAAC,MAAP,CAAc,IAAd,oBAAwB,IAAxB;AACA,cAAA,aAAa,CAAC,KAAD,CAAb;;AANQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD,GAAT;;AASA,aAAS,UAAT,GAAsB;AACpB,MAAA,aAAa,CAAC,IAAD,CAAb;AACA,MAAA,KAAK,CAAC,QAAN,CAAe,eAAf,oBAAoC,IAAI,CAAC,KAAzC;AACF;;AAEA,2CACK,MAAM,CAAC,IAAD,CADX;AAEE,MAAA,UAAS,EAAT;AAFF;AAID;AAvCY,CAAf","sourcesContent":["<template>\r\n  <AppSection tag=\"section\">\r\n    <template #head>\r\n      <h1>Редактировать пользователя</h1>\r\n    </template>\r\n    <form class=\"user-form\" @submit.prevent=\"submitForm\">\r\n      <div class=\"user-form__fields\">\r\n        <AppField\r\n            v-model=\"username\"\r\n            :model-value=\"username\"\r\n            id=\"user-name\"\r\n            placeholder=\"Введите ваше имя\"\r\n            maxLength=\"150\"\r\n        >\r\n          Ник\r\n        </AppField>\r\n        <AppField\r\n            v-model=\"password\"\r\n            :model-value=\"password\"\r\n            type=\"password\"\r\n            id=\"user-password\"\r\n            placeholder=\"Введите ваш пароль\"\r\n            maxLength=\"128\"\r\n        >\r\n          Пароль\r\n        </AppField>\r\n        <AppField\r\n            v-model=\"last_name\"\r\n            :model-value=\"last_name\"\r\n            id=\"last-name\"\r\n            placeholder=\"Введите ваше фамилия\"\r\n            maxLength=\"150\"\r\n        >\r\n          Фамилия\r\n        </AppField>\r\n        <AppField\r\n            v-model=\"first_name\"\r\n            :model-value=\"first_name\"\r\n            id=\"first-name\"\r\n            placeholder=\"Введите ваше имя\"\r\n            maxLength=\"150\"\r\n        >\r\n          Имя\r\n        </AppField>\r\n      </div>\r\n      <AppCheckbox v-model=\"is_active\">активный</AppCheckbox>\r\n      <div class=\"user-form__controls\">\r\n        <button type=\"submit\" class=\"btn _accent\">Редактировать</button>\r\n        <router-link to=\"/users\" type=\"button\" class=\"btn _danger\">Назад</router-link>\r\n      </div>\r\n    </form>\r\n  </AppSection>\r\n</template>\r\n\r\n<script>\r\nimport {ref, onMounted, toRefs, reactive} from \"vue\";\r\nimport {useStore} from \"vuex\";\r\nimport {useRoute} from \"vue-router\";\r\nimport axios from \"axios\";\r\nimport AppSection from \"../components/AppSection.vue\";\r\nimport AppField from \"../components/AppField.vue\";\r\nimport AppCheckbox from \"../components/AppCheckbox.vue\";\r\n/**\r\n * @name EditForm\r\n * @description Form edition user\r\n */\r\nexport default {\r\n  name: \"User\",\r\n  components: {AppSection, AppField, AppCheckbox},\r\n\r\n  setup() {\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    const id = ref(route.params['id'])\r\n    let form = reactive({\r\n      id,\r\n      username: '',\r\n      password: '',\r\n      'first_name': '',\r\n      'last_name': '',\r\n      'is_active': false\r\n    })\r\n\r\n    const changeLoading = (flag) => {\r\n      store.commit('modal/CHANGE_LOADING', flag)\r\n    }\r\n\r\n    onMounted(async () => {\r\n      changeLoading(true)\r\n\r\n      const { data } = await axios.get(`/api/v1/users/${id.value}`)\r\n\r\n      Object.assign(form, {...data})\r\n      changeLoading(false)\r\n    })\r\n\r\n    function submitForm() {\r\n      changeLoading(true)\r\n      store.dispatch('user/editUser', {...form.value})\r\n    }\r\n\r\n    return {\r\n      ...toRefs(form),\r\n      submitForm\r\n    }\r\n  },\r\n}\r\n</script>\r\n"],"sourceRoot":""}]}